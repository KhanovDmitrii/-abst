# Конспект по теме "шаблоны проектирования"

К наиболее простым и распространенным паттернам объектно-ориентированного проектирования относятся следующие паттерны:
* абстрактная фабрика;
* адаптер;
* компоновщик;
* декоратор;
* фабричный метод;
* наблюдатель;
* стратегия;
* шаблонный метод.


# Мотивация 

Почему мы говорим про использование паттернов?

Ответ: Проектирование объектно-ориентированных программ с нуля - неоптимально с точки зрения
траты времени, совершения ошибок при проектировании. Следует использовать решение,
использованное в прошлом и оказавшееся удачным.

# Классификация паттернов

По целям использования выделяют три основных группы шаблонов проектирования:
1. Поведенческие.
2. Структурные.
3. Порождающие.


# Описание

1. Поведенческие
определяют взаимодействие между объектами, увеличивая таким образом его
гибкость.

Рассмотрим поведенческие шаблоны на примере цепочки обязанностей. 

Шаблон рекомендован для использования в условиях:

* в разрабатываемой системе имеется группа объектов, которые могут обрабатывать сообщения определенного типа;
* все сообщения должны быть обработаны хотя бы одним объектом системы;
* сообщения в системе обрабатываются по схеме «обработай сам либо перешли другому», то есть одни сообщения обрабатываются на том уровне, где они получены, а другие пересылаются объектам иного уровня.

Пример реализации на языке программирования python:

    class Car:
      def __init__(self):
         self.name = None
         self.km = 11100
         self.fuel = 5
         self.oil = 5

    def handle_fuel(car):
     if car.fuel < 10:
         print "added fuel"
         car.fuel = 100

    def handle_km(car):
        if car.km > 10000:
            print "made a car test."
            car.km = 0

    def handle_oil(car):
      if car.oil < 10:
            print "Added oil"
            car.oil = 100

    class Garage:
        def __init__(self):
        self.handlers = []

        def add_handler(self, handler):
        self.handlers.append(handler)

        def handle_car(self, car):
        for handler in self.handlers:
            handler(car)

    if __name__ == '__main__':
        handlers = [handle_fuel, handle_km, handle_oil]
        garage = Garage()

     for handle in handlers:
         garage.add_handler(handle)
        garage.handle_car(Car())


2. Структурные
определяют различные сложные структуры, которые изменяют интерфейс уже
существующих объектов или его реализацию, позволяя облегчить разработку и
оптимизировать программу.
Пример: фасад


3. Порождающие
Шаблоны проектирования, которые абстрагируют процесс инстанцирования. Они
позволяют сделать систему независимой от способа создания, композиции и
представления объектов. Шаблон, порождающий классы, использует наследование,
чтобы изменять инстанцируемый класс, а шаблон, порождающий объекты, делегирует
инстанцирование другому объекту.

Рассмотрим порождающие шаблоны на примере singleton(Одиночка). 

Одиночка гарантирует, что некоторый класс может иметь только один экземпляр, и
предоставляет глобальную точку доступа к нему.

Мотивация
Для некоторых классов важно, чтобы существовал только один экземпляр.

Пример реализации на языке программирования python:

    def singleton(cls):
        instances = {}
        def getinstance():
            if cls not in instances:
                instances[cls] = cls()
             return instances[cls]
        return getinstance

    @singleton
    class MyClass:
        pass

     new_obj = MyClass() # singleton
     print(id(new_obj))
     super_new_obj = MyClass()
     print(id(super_new_obj))
     print(new_obj is super_new_obj)
     print(type(new_obj))
     print(isinstance(new_obj, type(new_obj)))
     print(isinstance(super_new_obj, type(super_new_obj)))

Достоинства:
* контролируемый доступ к единственному экземпляру;
* уменьшение числа имен;
* допускает уточнение операций и представления;
* допускает переменное число экземпляров;
* большая гибкость, чем у экземпляров класса.
